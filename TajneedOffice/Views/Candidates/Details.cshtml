@model TajneedOffice.Models.Candidate

@{
    ViewData["Title"] = "تفاصيل المرشح";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1><i class="fas fa-user"></i> تفاصيل المرشح</h1>
                <div>
                    <a asp-action="Edit" asp-route-id="@Model.CandidateId" class="btn btn-warning">
                        <i class="fas fa-edit"></i> تعديل
                    </a>
                    <a asp-action="Index" class="btn btn-secondary">
                        <i class="fas fa-arrow-right"></i> العودة للقائمة
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Basic Information -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-info-circle"></i> المعلومات الأساسية</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>الاسم الكامل:</strong></p>
                            <p class="text-muted">@Model.FullName</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>الرقم المدني:</strong></p>
                            <p class="text-muted">@Model.NationalIdNumber</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>رقم الخدمة:</strong></p>
                            <p class="text-muted">@(Model.ServiceNumber ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>تاريخ الميلاد:</strong></p>
                            <p class="text-muted">@Model.DateOfBirth.ToString("dd/MM/yyyy")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>الولاية:</strong></p>
                            <p class="text-muted">@Model.Governorate</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>الفئة:</strong></p>
                            <p class="text-muted">
                                <span class="badge bg-info">@Model.Category?.CategoryName</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-phone"></i> معلومات الاتصال</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>رقم الهاتف الأول:</strong></p>
                            <p class="text-muted">@(Model.Phone1 ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>رقم الهاتف الثاني:</strong></p>
                            <p class="text-muted">@(Model.Phone2 ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>رقم الهاتف الثالث:</strong></p>
                            <p class="text-muted">@(Model.Phone3 ?? "غير محدد")</p>
                        </div>
                        <div class="col-12">
                            <p><strong>العنوان:</strong></p>
                            <p class="text-muted">@(Model.Address ?? "غير محدد")</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Military Information -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-medal"></i> المعلومات العسكرية</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>الرتبة الحالية:</strong></p>
                            <p class="text-muted">@(Model.CurrentRank?.RankName ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>القاعدة الجوية:</strong></p>
                            <p class="text-muted">@(Model.CurrentAirbase?.AirbaseName ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>القسم:</strong></p>
                            <p class="text-muted">@(Model.Department ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>المسمى الوظيفي:</strong></p>
                            <p class="text-muted">@(Model.JobTitle ?? "غير محدد")</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Educational Information -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-graduation-cap"></i> المعلومات التعليمية</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>التخصص:</strong></p>
                            <p class="text-muted">@(Model.Major ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>الجامعة:</strong></p>
                            <p class="text-muted">@(Model.University ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>سنة التخرج:</strong></p>
                            <p class="text-muted">@(Model.GraduationYear?.ToString() ?? "غير محدد")</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>الدرجة/المعدل:</strong></p>
                            <p class="text-muted">@(Model.MarksGrade ?? "غير محدد")</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Scores and Medical Information -->
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-chart-bar"></i> درجات الاختبارات</h5>
                </div>
                <div class="card-body">
                    @if (Model.TestScores != null)
                    {
                        <div class="row">
                            <div class="col-sm-6">
                                <p><strong>اللغة الإنجليزية:</strong></p>
                                <p class="text-muted">@(Model.TestScores.EnglishScore?.ToString() ?? "غير محدد")</p>
                            </div>
                            <div class="col-sm-6">
                                <p><strong>الرياضيات:</strong></p>
                                <p class="text-muted">@(Model.TestScores.MathematicsScore?.ToString() ?? "غير محدد")</p>
                            </div>
                            <div class="col-sm-6">
                                <p><strong>الثقافة العامة:</strong></p>
                                <p class="text-muted">@(Model.TestScores.GeneralCultureScore?.ToString() ?? "غير محدد")</p>
                            </div>
                            <div class="col-sm-6">
                                <p><strong>اللغة العربية:</strong></p>
                                <p class="text-muted">@(Model.TestScores.ArabicScore?.ToString() ?? "غير محدد")</p>
                            </div>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">لم يتم تسجيل درجات الاختبارات بعد</p>
                    }
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-heartbeat"></i> المعلومات الطبية</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">لم يتم تسجيل المعلومات الطبية بعد</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Status and Actions -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-tasks"></i> الحالة والإجراءات</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>الحالة الحالية:</strong></p>
                            @{
                                var statusClass = Model.CurrentStatus switch
                                {
                                    "جديد" => "bg-primary",
                                    "قيد التقييم" => "bg-warning",
                                    "مكتمل" => "bg-success",
                                    "مرفوض" => "bg-danger",
                                    _ => "bg-secondary"
                                };
                            }
                            <span class="badge @statusClass fs-6">@Model.CurrentStatus</span>
                        </div>
                        <div class="col-md-6">
                            <p><strong>تاريخ التسجيل:</strong></p>
                            <p class="text-muted">@Model.CandidateId.ToString().Substring(0, 8)</p>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="d-flex gap-2">
                        <a asp-controller="Evaluations" asp-action="Create" asp-route-candidateId="@Model.CandidateId" 
                           class="btn btn-info">
                            <i class="fas fa-clipboard-check"></i> تقييم المرشح
                        </a>
                        @* Evaluation actions temporarily disabled *@
                        <a href="#" class="btn btn-secondary">
                            <i class="fas fa-file-pdf"></i> تحميل التقرير
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 